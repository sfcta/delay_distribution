<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Delay Distribution Generator (generate_delay_distribution) &mdash; Travel Time Distribution Tool 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Travel Time Distribution Tool 2.0 documentation" href="index.html" />
    <link rel="next" title="Cumulative Delays (cumulative_distribution)" href="cumulative_distribution.html" />
    <link rel="prev" title="Travel Time Distribution Tool Overview" href="overview.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cumulative_distribution.html" title="Cumulative Delays (cumulative_distribution)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Travel Time Distribution Tool Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Travel Time Distribution Tool 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-generate_delay_distribution"></span><div class="section" id="delay-distribution-generator-generate-delay-distribution">
<h1>Delay Distribution Generator (generate_delay_distribution)<a class="headerlink" href="#delay-distribution-generator-generate-delay-distribution" title="Permalink to this headline">¶</a></h1>
<p>Calculates cumulative distribution of delay
or travel time given various elements of delay or travel time components. 
Accurate to 1-second resolution. Output is in the form of a CSV file which
provides the probabilities of duration for each possible value of time, in
seconds. Implements &#8216;Trial Bus&#8217; statistical technique.</p>
<p>Data must be provided in the form of CSV files (see details below).</p>
<dl class="docutils">
<dt>This python file is organized as follows:</dt>
<dd><ol class="first last arabic simple">
<li>Housekeeping - importing packages, USAGE parameter.</li>
<li>Travel time distributions - importing classes for all components of travel time or delay</li>
<li>Process data - read in CSV file input data; process data and provide outputs</li>
</ol>
</dd>
</dl>
<div class="section" id="this-script-accepts-the-input-as-provided-in-csv-files-as-follows">
<h2>This script accepts the input as provided in CSV files as follows.<a class="headerlink" href="#this-script-accepts-the-input-as-provided-in-csv-files-as-follows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>USAGE: <tt class="docutils literal"><span class="pre">python</span> <span class="pre">generate_delay_distribution.py</span> <span class="pre">[scenario_name]</span> <span class="pre">spec_dir</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">scenario_name:</th><td class="field-body"><em>(OPTIONAL)</em> name of scenario, specifies input and output nomenclature</td>
</tr>
<tr class="field-even field"><th class="field-name">spec_dir:</th><td class="field-body">path to directory containing csv files with delay information</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt><strong>Input file info:</strong></dt>
<dd><ul class="first last simple">
<li>one or more files may be provided for each scenario</li>
<li>all files should contain a header row, with data beginning
on the second row</li>
<li>files are assumed to be formatted in CSV as saved by Excel</li>
</ul>
</dd>
<dt><strong>Input files:</strong></dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal"><span class="pre">BaseTravelTime_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of base travel time (independent of any modeled delay), as fixed or normally-distributed</dt>
<dd><p class="first last">(normally-distributed travel times will not include any negative values, however, and will therefore reflect rescaled
pseudo-normal distributions). The name column is for convenience only and will be ignored.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Name,</li>
<li>Average travel time,</li>
<li>Standard deviation</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">values in seconds</p>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">TravelTimeAdjustments_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of adjustments to travel time (independent of any modeled delay), as the probabilities of any</dt>
<dd><p class="first last">given adjustments, in seconds. For example, the first row of data may specify the probability of a 0-second adjustment;
the second row may specify the probability of a 1-second adjustment; and so on. Negative values are allowed. Duplicate
entries will be double-counted. Probabilities should add to 1 (but will be rescaled otherwise).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>delay_sec,</li>
<li>probability</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">can specify additional files as:</p>
<div class="highlight-python"><pre>TravelTimeAdjustments_[scenario_name]_2.csv
TravelTimeAdjustments_[scenario_name]_3.csv
etc.</pre>
</div>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">BinomialDistributions_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of binomially-distributed delays (i.e., where there is a fixed probability of a fixed delay</dt>
<dd><p class="first last">across multiple analysis zones). Multiple zone groupings or delay types may be specified (in separate rows).
The name column is for convenience only and will be ignored.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Name,</li>
<li>n (number of trials),</li>
<li>p (probability of encounter at each trial),</li>
<li>delay per encounter (seconds)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">MultinomialDistributions_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of multinomially-distributed delays (i.e., where there is a fixed probability of stochastically-distributed delay</dt>
<dd><p class="first last">across multiple analysis zones). Multiple zone groupings or delay types may be specified (in separate rows).
The name column is for convenience only and will be ignored.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Name,</li>
<li>n (number of trials),</li>
<li>p (probability of encounter at each trial),</li>
<li>mean of delay per encounter (sec),</li>
<li>standard deviation of delay per encounter (sec),</li>
<li>distribution of delay per encounter (&#8220;normal&#8221; or &#8220;lognormal&#8221;)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">TurningVehiclesAnalytics_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of parameters related to delay caused by turning vehicles. This specification</dt>
<dd><p class="first last">uses regression-based estimates to predict delay based on the data provided.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Turning Point Set,</li>
<li>Number of Turning Points,</li>
<li>turns_per_hr (turn demand per hour at each point in set),</li>
<li>turn_dir (&#8220;R&#8221; or &#8220;Right&#8221; for right turn; &#8220;L&#8221;/&#8221;Left&#8221; if left),</li>
<li>num_turn_lanes (number of turn lanes at each point),</li>
<li>peds_per_hr (rate of pedestrians walking parallel to traffic
that might delay turning vehicles, count per hour),</li>
<li>crossing_dist (number of lane widths peds cross curb to curb 
incl. parking and contraflow lanes; bike lanes ~ 0.5 lane)</li>
<li>exit_lanes (number of travel lanes into which turning vehicles
could turn, incl. bus lanes but not contraflow or parking),</li>
<li>cycle_len (length of signal cycle in sec; -1 for no signal),</li>
<li>turn_phase (total length of green phase for turning vehs, sec),</li>
<li>ped_phase (total length of walk phase for peds, sec)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Turning Point Set is a string (e.g.: &#8216;A&#8217;) that refers to
a set of turning points with identical delay distributions</p>
</li>
<li><p class="first">Number of Turning Points is the number of turning points
in the set</p>
</li>
<li><p class="first">turn_phase and ped_phase are assumed to have maximal overlap</p>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">TurningVehiclesDetails_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of delay caused by turning vehicles. This specification takes the fixed</dt>
<dd><p class="first last">delay per point (conditional on delay) to predict overall delay.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Turning Point Set,</li>
<li>Number of Turning Points,</li>
<li>delay_sec (per point),</li>
<li>probability (per point)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Turning Point Set is a string (e.g.: &#8216;A&#8217;) that refers to
a set of turning points with identical delay distributions
NOTE that all data for a given set must be grouped
consecutively (cannot give data for A, then B, then A)</p>
</li>
<li><p class="first">Number of Turning Points is the number of turning points
in the set</p>
</li>
<li><p class="first">delay_sec is a possible delay, in seconds, for turning
points in the present set</p>
</li>
<li><p class="first">probability is the probibility of delay_sec delay for
turning points in the present set</p>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">TrafficSignals_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of traffic signal attributes to predict delay due to red lights along</dt>
<dd><p class="first last">the study corridor. The name column is for convenience only and will be ignored.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last simple">
<li>Name,</li>
<li>Cycle time,</li>
<li>Green time,</li>
<li>Fixed delay</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">values in seconds</p>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">StationsStops_[scenario_name].csv</span></tt></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Allows specification of train station or bus stop information to predict delay due to</dt>
<dd><p class="first last">dwell time, including boarding and alighting time. The name column is for convenience only and will be ignored.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>columns</dt>
<dd><ul class="first last">
<li><p class="first">Name,</p>
</li>
<li><p class="first">Fixed delay (seconds),</p>
</li>
<li><p class="first">Number of doors,</p>
</li>
<li><p class="first">Hourly boardings,</p>
</li>
<li><p class="first">Hourly alightings,</p>
</li>
<li><p class="first">Boarding time per passenger per door (seconds),</p>
</li>
<li><p class="first">Alighting time per passenger per door (seconds),</p>
</li>
<li><p class="first">Mean headway (minutes),</p>
</li>
<li><p class="first">Standard deviation of headway (minutes),</p>
</li>
<li><dl class="first docutils">
<dt>Stop requirement</dt>
<dd><ul class="first last simple">
<li>1 or TRUE or YES if stop is required</li>
<li>0 or FALSE or NO if stop can be skipped when no pax wish to board or alight</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following types of delay are stubbed out in the generator file but not yet implemented:</p>
<ul class="last">
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">StopSigns_[scenario_name].csv</span></tt> [<em>module not yet available</em>]</dt>
<dd><ul class="first last simple">
<li>columns: Name, Fixed delay, Wait probability, Max wait</li>
<li>values in seconds (except probability)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">PedXings_[scenario_name].csv</span></tt> [<em>module not yet available</em>]</dt>
<dd><ul class="first last simple">
<li>columns: Name, Delay probability, Max delay (seconds)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div></blockquote>
</div>
<div class="section" id="output-csv-files-are-produced-as-follows">
<h2>Output CSV files are produced as follows.<a class="headerlink" href="#output-csv-files-are-produced-as-follows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>For each type of input CSV provided, for each scenario, an output file will be created with a similar name, but with the ending
<tt class="docutils literal"><span class="pre">_cumulative.csv</span></tt>. These output files represent the probability distributions of cumulative delay along
the study corridor due to the delays specified by the relevant input CSV file.close</p>
<p>For each scenerio, an output file will be created with the name <tt class="docutils literal"><span class="pre">TotalDelay_[scenario_name]_cumulative.csv</span></tt>. These
output files represent the probability distributions of cumulative delay or cumulative travel time along the study corridor
due to all specified delays and including base travel time and travel time adjustments.</p>
<p>All output files have two columns, <strong>Delay</strong> and <strong>Cumulative Delay Probability</strong>. In each row, Delay is a duration of cumulative delay
or overall travel time, in seconds. Cumulative Delay Probability is the probability of the trial bus experiencing that delay or
travel time.accept2dyear</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cumulative delay and cumulative travel time are not to be confused with cumulative distribution functions. Although the word
&#8220;cumulative&#8221; is used here, to imply the modeling of aggregate delay across analysis zones and delay types, the output distributions are
probability mass functions (PMFs) that approximate probability density functions (PDFs) on the 1-second scale. Output distributions are NOT
cumulative distributions (CDFs).</p>
</div>
</div></blockquote>
<dl class="docutils">
<dt>Authors:</dt>
<dd><a class="reference external" href="mailto:teo&#37;&#52;&#48;sfcta&#46;org">teo<span>&#64;</span>sfcta<span>&#46;</span>org</a>, 12/20/2013</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Delay Distribution Generator (generate_delay_distribution)</a><ul>
<li><a class="reference internal" href="#this-script-accepts-the-input-as-provided-in-csv-files-as-follows">This script accepts the input as provided in CSV files as follows.</a></li>
<li><a class="reference internal" href="#output-csv-files-are-produced-as-follows">Output CSV files are produced as follows.</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Travel Time Distribution Tool Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cumulative_distribution.html"
                        title="next chapter">Cumulative Delays (cumulative_distribution)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/delay_dist_generator.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cumulative_distribution.html" title="Cumulative Delays (cumulative_distribution)"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Travel Time Distribution Tool Overview"
             >previous</a> |</li>
        <li><a href="index.html">Travel Time Distribution Tool 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Teo Wickland and Elizabeth Sall.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>